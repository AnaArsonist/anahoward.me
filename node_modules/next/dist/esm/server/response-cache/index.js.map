{"version":3,"sources":["../../../../src/server/response-cache/index.ts"],"names":["RenderResult","ResponseCache","constructor","minimalMode","pendingResponses","Map","get","key","responseGenerator","context","incrementalCache","pendingResponseKey","isManualRevalidate","pendingResponse","resolver","rejecter","promise","Promise","resolve","reject","set","resolved","cacheEntry","previousCacheItem","expiresAt","Date","now","entry","delete","cachedResponse","value","kind","Error","isStale","revalidate","curRevalidate","html","fromStatic","pageData","isPrefetch","resolveValue","isMiss","toUnchunkedString","undefined","err","Math","min","max","console","error"],"mappings":"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"}