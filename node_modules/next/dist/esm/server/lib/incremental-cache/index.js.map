{"version":3,"sources":["../../../../../src/server/lib/incremental-cache/index.ts"],"names":["FileSystemCache","path","normalizePagePath","FetchCache","toRoute","pathname","replace","CacheHandler","constructor","_ctx","get","_key","_fetchCache","set","_data","IncrementalCache","fs","dev","appDir","flushToDisk","fetchCache","minimalMode","serverDistDir","requestHeaders","maxMemoryCacheSize","getPrerenderManifest","incrementalCacheHandlerPath","cacheHandlerMod","process","env","NEXT_RUNTIME","require","default","__NEXT_TEST_MAX_ISR_CACHE","parseInt","prerenderManifest","cacheHandler","_appDir","_requestHeaders","calculateRevalidate","fromTime","Date","getTime","initialRevalidateSeconds","routes","revalidateAfter","_getPathname","fetchCacheKey","url","init","cacheString","JSON","stringify","method","headers","mode","redirect","credentials","referrer","referrerPolicy","integrity","next","cache","cacheKey","bufferToHex","buffer","Array","prototype","map","call","Uint8Array","b","toString","padStart","join","TextEncoder","encode","crypto","subtle","digest","createHash","update","cacheData","entry","value","kind","data","age","Math","round","now","lastModified","revalidate","isStale","curRevalidate","undefined","notFoundRoutes","includes","revalidateSeconds","dataRoute","posix","srcRoute","error","console","warn"],"mappings":"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"}