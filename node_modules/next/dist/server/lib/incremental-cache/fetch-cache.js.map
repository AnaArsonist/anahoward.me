{"version":3,"sources":["../../../../../src/server/lib/incremental-cache/fetch-cache.ts"],"names":["FetchCache","constructor","ctx","maxMemoryCacheSize","memoryCache","LRUCache","max","length","value","JSON","kind","stringify","props","Error","data","html","pageData","debug","process","env","NEXT_PRIVATE_DEBUG_CACHE","headers","FETCH_CACHE_HEADER","_requestHeaders","newHeaders","parse","k","cacheEndpoint","console","log","get","key","fetchCache","start","Date","now","res","fetch","method","body","ok","error","text","status","items","json","item","cached","lastModified","age","set","err","id"],"mappings":"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"}